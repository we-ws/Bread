cmake_minimum_required(VERSION 3.16...4.1)

# ------------------------------------------------------------
# Project
# ------------------------------------------------------------
project(Bread
    LANGUAGES C CXX
)

# ------------------------------------------------------------
# Source files
# ------------------------------------------------------------
file(GLOB_RECURSE SOURCES
    src/*.c
    src/*.cpp
    src/*.h
    *.c
    *.cpp
    *.h
)

add_executable(${PROJECT_NAME} ${SOURCES})

# ------------------------------------------------------------
# Language standards
# ------------------------------------------------------------
set_target_properties(${PROJECT_NAME} PROPERTIES
    C_STANDARD 11
    C_STANDARD_REQUIRED YES
    C_EXTENSIONS NO

    CXX_STANDARD 20
    CXX_STANDARD_REQUIRED YES
    CXX_EXTENSIONS NO
)

# ------------------------------------------------------------
# Compiler warnings (language-specific)
# ------------------------------------------------------------
target_compile_options(${PROJECT_NAME} PRIVATE
    $<$<COMPILE_LANGUAGE:C>:
        -Wall
        -Wextra
        -Wconversion
    >
    $<$<COMPILE_LANGUAGE:CXX>:
        -Wall
        -Wextra
        -Wfloat-conversion
    >
)

# ------------------------------------------------------------
# Paths
# ------------------------------------------------------------
set(UCRT_PATH "D:/msys64/ucrt64")
set(MSYS2_PATH "D:/msys64/mingw64")
set(IMGUI_PATH "${CMAKE_CURRENT_SOURCE_DIR}/imgui")

# ------------------------------------------------------------
# Include directories
# ------------------------------------------------------------
target_include_directories(${PROJECT_NAME} PRIVATE
    ${CMAKE_CURRENT_SOURCE_DIR}/src
    ${CMAKE_CURRENT_SOURCE_DIR}/core
    ${CMAKE_CURRENT_SOURCE_DIR}/utils
    ${CMAKE_CURRENT_SOURCE_DIR}/ui

    ${IMGUI_PATH}
    ${IMGUI_PATH}/backends

    ${UCRT_PATH}/include
    ${MSYS2_PATH}/include
)
